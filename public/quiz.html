<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <div class="header">
        <div class="container">
            <a href="menu.html"><img src="assets/imgs/logo_sem_fundo_branco.png" alt="Logo"
                    style="height: var(--tamanho-header); width: 90px;"></a>
            <ul class="navbar">
                <li>
                    <a href="menu.html">Início</a>
                </li>
                <li>
                    <a href="dashboard.html">Dashboard</a>
                </li>
                <li>
                    <a href="sobre_mim.html">Sobre mim</a>
                </li>
                <li>
                    <a href="mini_game.html">Mini Game</a>
                </li>
                <li>
                    <a href="quiz.html"><b>Quiz</b></a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container_tela_quiz">
        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>1. Quantas faixas existem no jiu jitsu, incluindo até a preta?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q1a" name="questao_1" value="A">
                <label for="q1a">6 faixas</label><br>

                <input type="radio" id="q1b" name="questao_1" value="B">
                <label for="q1b">7 faixas</label><br>

                <input type="radio" id="q1c" name="questao_1" value="C">
                <label for="q1c">8 faixas</label><br>

                <input type="radio" id="q1d" name="questao_1" value="D">
                <label for="q1d">9 faixas</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>2. Qual dos lutadores abaixo já foi campeão duplo no UFC?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q2a" name="questao_2" value="A">
                <label for="q2a">José Aldo</label><br>

                <input type="radio" id="q2b" name="questao_2" value="B">
                <label for="q2b">Amanda Nunes</label><br>

                <input type="radio" id="q2c" name="questao_2" value="C">
                <label for="q2c">Nate Diaz</label><br>

                <input type="radio" id="q2d" name="questao_2" value="D">
                <label for="q2d">Charles do Bronx</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>3. Qual das artes marciais abaixo é conhecida por usar, além de socos e chutes, joelhadas e
                        cotoveladas?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q3a" name="questao_3" value="A">
                <label for="q3a">Karatê</label><br>

                <input type="radio" id="q3b" name="questao_3" value="B">
                <label for="q3b">Boxe</label><br>

                <input type="radio" id="q3c" name="questao_3" value="C">
                <label for="q3c">Muay Thai</label><br>

                <input type="radio" id="q3d" name="questao_3" value="D">
                <label for="q3d">Taekwondo</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>4. Qual arte marcial é conhecida pelo estilo de luta em quedas?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q3a" name="questao_4" value="A">
                <label for="q4a">Sambo</label><br>

                <input type="radio" id="q4b" name="questao_4" value="B">
                <label for="q4b">Krav Maga</label><br>

                <input type="radio" id="q4c" name="questao_4" value="C">
                <label for="q4c">Kickboxing</label><br>

                <input type="radio" id="q4d" name="questao_4" value="D">
                <label for="q4d">Judô</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>5. Em qual país o Muay Thai é uma arte marcial tradicional?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q5a" name="questao_5" value="A">
                <label for="q5a">Tailândia</label><br>

                <input type="radio" id="q5b" name="questao_5" value="B">
                <label for="q5b">Sri Lanka</label><br>

                <input type="radio" id="q5c" name="questao_5" value="C">
                <label for="q5c">Filipinas</label><br>

                <input type="radio" id="q5d" name="questao_5" value="D">
                <label for="q5d">Japão</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>6. Qual evento teve mais audiência do UFC?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q5a" name="questao_6" value="A">
                <label for="q6a">Jon Jones x Lyoto Machida</label><br>

                <input type="radio" id="q5b" name="questao_6" value="B">
                <label for="q6b">Andreson Silva x Vitor Belfort</label><br>

                <input type="radio" id="q5c" name="questao_6" value="C">
                <label for="q6c">McGregor x Khabib</label><br>

                <input type="radio" id="q5d" name="questao_6" value="D">
                <label for="q6d">Amanda Nunes x Ronda Rousey</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>7. A trilogia Creed é inspirada em qual estilo de luta?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q7a" name="questao_7" value="A">
                <label for="q7a">Jiu-Jitsu</label><br>

                <input type="radio" id="q7b" name="questao_7" value="B">
                <label for="q7b">Boxe</label><br>

                <input type="radio" id="q7c" name="questao_7" value="C">
                <label for="q7c">Ninjustu</label><br>

                <input type="radio" id="q7d" name="questao_7" value="D">
                <label for="q7d">Capoeira</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>8. Qual dos personagens abaixo de street figher luta karatê?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q7a" name="questao_8" value="A">
                <label for="q8a">Chun-Li</label><br>

                <input type="radio" id="q7b" name="questao_8" value="B">
                <label for="q8b">Ryu</label><br>

                <input type="radio" id="q7c" name="questao_8" value="C">
                <label for="q8c">Ken</label><br>

                <input type="radio" id="q7d" name="questao_8" value="D">
                <label for="q8d">Zangief</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>9. Qual dos golpes abaixo é popular no boxe?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q9a" name="questao_9" value="A">
                <label for="q9a">Cotovelada</label><br>

                <input type="radio" id="q9b" name="questao_9" value="B">
                <label for="q9b">Mata-leão</label><br>

                <input type="radio" id="q9c" name="questao_9" value="C">
                <label for="q9c">Chute na panturrilha</label><br>

                <input type="radio" id="q9d" name="questao_9" value="D">
                <label for="q9d">Direto</label><br>
            </div>
        </div>

        <div class="container_questao">
            <div class="div_enunciado">
                <h3><b>10. Qual dos animes abaixo é conhecido por ser um anime de luta?</b></h3>
            </div>
            <div class="div_alternativas">
                <input type="radio" id="q10a" name="questao_10" value="A">
                <label for="q10a">Dragon Ball</label><br>

                <input type="radio" id="q10b" name="questao_10" value="B">
                <label for="q10b">Death Note</label><br>

                <input type="radio" id="q10c" name="questao_10" value="C">
                <label for="q10c">Cells At Work</label><br>

                <input type="radio" id="q10d" name="questao_10" value="D">
                <label for="q10d">Mob Psycho</label><br>
            </div>
        </div>
        <button onclick="responder()" id="btn_responder_quiz">Responder</button>

        <div id="div_resposta_quiz"></div>
        <div id="div_resposta_img"></div>

    </div>

    <div class="footer">
        <div class="autor">
            <h2>Criado por Rafael Mechi de Oliveira - 04251039 &#174</h2>
        </div>
        <div class="redes_sociais">
            <a href="https://github.com/Rafael-Mechi" target="_blank">
                <i class="fab fa-github" style="font-size:50px; color: black;"></i>
            </a>
            <a href="https://www.linkedin.com/in/seu-perfil" target="_blank">
                <i class="fab fa-linkedin icone-linkedin" style="font-size:50px; color: black; margin-left: 10px;"></i>
            </a>
        </div>
    </div>
</body>
<script>
    function responder() {
        const idUsuario = sessionStorage.ID_USUARIO;

        if (!idUsuario) {
            alert("Usuário não logado.");
            return;
        }

        const respostas = [];
        let certas = 0;
        let erradas = 0;
        const respostasCorretas = {
            1: "C", // 8 faixas
            2: "B", // Amanda Nunes
            3: "C", // Muay Thai
            4: "D", // Judô
            5: "A", // Tailândia
            6: "C", // McGregor x Khabib
            7: "B", // Boxe
            8: "B", // Ryu
            9: "D", // Direto
            10: "A" // Dragon Ball
        };

        for (let i = 1; i <= 10; i++) {
            const resposta = document.querySelector(`input[name="questao_${i}"]:checked`);
            if (!resposta) {
                alert(`Por favor, responda todas as perguntas.`);
                return;
            }

            respostas.push({ idPergunta: i, resposta: resposta.value });

            if (resposta.value === respostasCorretas[i]) {
                certas++;
            } else {
                erradas++;
            }
        }

        fetch("/quiz/responder", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                idUsuarioServer: idUsuario,
                respostasServer: respostas
            })
        })
            .then(resposta => {
                if (resposta.ok) {
                    const porcentagem = ((certas / 10) * 100).toFixed(2);

                    div_resposta_quiz.innerHTML = `
                    <p><b>Acertos:</b> ${certas}</p><br>
                    <p><b>Erros:</b> ${erradas}</p><br>
                    <p><b>Porcentagem de acertos:</b> ${porcentagem}%</p>
                `;

                    if (certas == 0) {
                        div_resposta_img.innerHTML = `<img src="/css/mh_jr.jpeg">`;
                    }

                    else if (certas >= 1 && certas <= 5) {
                        div_resposta_img.innerHTML = `<img src="/css/yamcha.png">`;
                    }

                    else if (certas >= 6 && certas <= 8) {
                        div_resposta_img.innerHTML = `<img src="/css/naruto.jpeg">`;
                    }

                    else if (certas >= 9) {
                        div_resposta_img.innerHTML = `<img src="/css/muito_feliz.jpg">`;
                    }

                } else {
                    alert("Erro ao enviar respostas.");
                }
            })
            .catch(erro => {
                console.error("Erro na requisição: ", erro);
                alert("Erro na conexão com o servidor.");
            });
    }
</script>



</html>